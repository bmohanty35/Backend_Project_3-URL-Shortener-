<!DOCTYPE html>
<html>
<head>
    <title>URL Shortener</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Page Container -->
<div class="container mt-5">
  <div class="main-box mx-auto" style="max-width:500px;">
    <!-- Heading -->
    <h3 class="text-center title mb-4">URL Shortener</h3>

    <!-- Flash message -->
    {% with messages = get_flashed_messages() %}                    
      {% if messages %}
        {% for msg in messages %}
            <div class="alert alert-danger">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Form for URL input -->
    <form action="/shorten" method="POST">
        <input class="form-control mb-3" name="long_url" placeholder="Enter URL here">
        <button class="btn btn-primary w-100">Shorten URL</button>
    </form>

    <!-- Display Short URL -->
    {% if short_url %}
    <div class="mt-4">
        <label>Short URL</label>
        <input id="shortUrl" class="form-control" value="{{ short_url }}" readonly>
        <button onclick="copyUrl()" class="btn btn-success mt-2 copy-btn">Copy</button>
    </div>
    {% endif %}

    <!-- View History Link -->
    <div class="text-center mt-3">
        <a href="/history">View History</a>
    </div>

  </div>
</div>

<!-- Copy function -->
<script>
function copyUrl(){
    let text = document.getElementById("shortUrl");
    text.select();
    document.execCommand("copy");
    alert("Copied!");
}
</script>

</body>
</html>
